## Описание блокчейна для проекта #0111

Прежде всего автор хочет отметить что, естственно, серьезный блокчейн а тем более блокчейн фреймворк не 
делается не то что бы за сутки (месяц, год), а вообще-то несколько лет, из которых большенство 
это проверка принятых дизайнерских решений на практике. Это область, стоящая на острие инженерной 
и научной мысли, а потому должно пройти немало времени, когда станет понятно что жизнеспособно, а то надумуманно.

Потому описание альтернативной архитектуры блокчейна будет большей частью мысленной, с умозрительными доказательствами там 
где нужно, ссылками на источники для ознокомления либо подверждающие некоторые утверждения, и конечно, работающим кодом и кодов в качестве proof-of-concept.

В основе БЧ как довольно серьезного программного комплекса лежит фреймворк, обеспечивающий базовые высокоуровневые примитивы:
работа с многопоточностью, расперделению задач, работа с сетью, работа с файловой системой и т.д. Однако, хотелось бы подчеркнуть, что подобыне примитивы
сами по себе являются достаточно низкоуровневыми. Представляетя что более продвинутые подходы к орагизации 
архитектуры позволяют значительно упростить написание распределенных бриложений типа БЧ. Среди них автор выделяет:
1. Реактивное фунциональное программирование (FRP) и его частный случай в виде future/promises. Пока настоящее FRP ещё не созрело,
код на future/promises довольно привычным.
2. Акторы и формализм Акторов. Акторы естественным образом инкапсулируют в себе свойство распределенности. Удобным свойством является то, что 
физическое расположение актора не имеет значения, достаточно знать его имя, и по нему можно посылать сообщения. Другим способствующим 
свойством является легкая реализация отказоустойчивости. Кроме того Erlang и Akka зарекомедовали себя как лидеры среди платформ для 
построения распределенных приложений.

И последним требуемым свойтсвом фреймворка должна быть его исключительная производительность.
Исходя из описанных требований предлагается использовать:

1. [Seastar](http://seastar.io/), имеющий future-based дизайн, созданный для того чтобы быть основой для [ScyllaDB](https://www.scylladb.com/). Shared-nothing архитектура, user-space tcp стек, 
tcp стек на основе DPDK, быстрый асинхронный дисковый ввод-вывод, плюс выдающийся опыт разработчиков и немалые вложенные ресурсы.

2. [С++ Actor Framework](https://actor-framework.org/). единственный полноценный фрейворк Акторов на C++. В большинстве своем повторяет дизайн Erlang.

Идеальным автор полагает создание надстройки в виде Акторов над Seastar.
Далее все приеры будут на основе CAF.

# Общее описание

Сам блокчейн будет представлять из себя классическую цепочку блоков, каждый из которых подверждает предыдущий, содержа его хэш.
В каждом из блоков содержится пара ключ/объект. Объект представляет из себя некую команду на смену состояния, определенного в предметной области. Для точности 
положим что предметная область - это цифровая валюта, тогда состоянием будет баланс счета, а коммандой будет тройка 
<номер счета отправителя, номер счета получателя, количество>. Действующие Узлы-учасники сети хранят текущее состояне счетов, исполняют комманды перед тем как зафиксировать их в блоке, 
и могут восстанавливать их до актуального, проигрывая все комманды из блокчейна. Сам блокчейн таким образом представляет из себя append-only-log, в построенной по принципу SQRS системе.
Самым важным моментом тут будет, естественно, [правила по определению консенсуса](Consensus.md).

Описане, по порядку слоёв БЧ:

[P2P](P2P.md)

[Консенсус](Consensus.md)

[База данных](Database.md)

[Криптография](Crypto.md)

[API](API.md)